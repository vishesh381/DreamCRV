export function localeMiddleware(app, context) {
    const { i18n: { defaultLocale }, } = context.runtimeEnvironment;
    app.use(async (req, _res, next) => {
        const langs = req.acceptsLanguages();
        req.locale = langs?.length > 0 && langs[0] != '*' ? langs[0] : defaultLocale;
        // await is required when calling next to support koa
        await next();
    });
}
//# sourceMappingURL=locale-middleware.js.map