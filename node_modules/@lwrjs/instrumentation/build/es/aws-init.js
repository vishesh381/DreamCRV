import { NodeSDK } from '@opentelemetry/sdk-node';
import { Resource } from '@opentelemetry/resources';
import { SemanticResourceAttributes } from '@opentelemetry/semantic-conventions';
import { BatchSpanProcessor } from '@opentelemetry/sdk-trace-node';
import { AWSExporter } from './aws-exporter.js';
import { getTraceCollector } from '@lwrjs/instrumentation';
export default class InstrumentationHook {
    initInstrumentation() {
        const exporter = new AWSExporter();
        const processor = new BatchSpanProcessor(exporter);
        const sdk = new NodeSDK({
            resource: new Resource({
                [SemanticResourceAttributes.SERVICE_NAME]: 'lwr-project',
            }),
            instrumentations: [],
            spanProcessors: [processor, getTraceCollector()],
        });
        sdk.start();
        return {
            flush() {
                processor.forceFlush();
            },
        };
    }
}
//# sourceMappingURL=aws-init.js.map