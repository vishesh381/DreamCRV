import { release } from 'os';
/**
 * Shared utility for launching a localhost browser window at a given port.
 *
 * @param port - the port number
 * @param https - if true, use https
 */
export async function launch(port, https, path) {
    const { exec } = await import('child_process');
    let cmd = 'open';
    if (process.platform == 'win32') {
        cmd = 'start';
    }
    else if (process.platform == 'linux') {
        if (/microsoft/i.test(release())) {
            cmd = 'cmd.exe /c start';
        }
        else {
            cmd = 'xdg-open';
        }
    }
    // Ensure the path begins with '/' if provided
    const finalPath = path ? (path.startsWith('/') ? path : `/${path}`) : '';
    const protocol = https ? 'https' : 'http';
    const url = `${protocol}://localhost:${port}${finalPath}/`;
    exec(`${cmd} ${url}`);
    return url;
}
//# sourceMappingURL=launch.js.map