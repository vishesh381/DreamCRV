import { logger } from '@lwrjs/diagnostics';
import express from 'express';
import path from 'path';
import { getMrtArtifactUrl, getMrtSsgRoot, getSsgAppRelativePath } from '@lwrjs/shared-utils';
export function addMrtStaticBundleMiddleware(app, staticSiteGenerator) {
    // Running at '' (no basePath)
    const basePath = '';
    const mrtArtifactUrl = getMrtArtifactUrl(basePath, getSsgAppRelativePath(staticSiteGenerator));
    const mrtSSgRoot = path.resolve(process.cwd(), getMrtSsgRoot(staticSiteGenerator));
    logger.debug({ label: `MrtStaticBundleMiddleware`, message: `${mrtArtifactUrl} -> ${mrtSSgRoot}` });
    app.use(mrtArtifactUrl, express.static(mrtSSgRoot, {
        fallthrough: false,
    }));
}
//# sourceMappingURL=utils.js.map